
# Utils

## Описание ресурса
Utils

# Методы

## batch

### Описание метода
Utils.batch
Осуществляет пакетное выполнение методов.
Параметры
Результат
Массив объектов типа «BatchResponse».
Уровень доступа для ролей
Соответствует конкретному методу в пакете.
ВНИМАНИЕ!
Метод НЕ является транзакционным. Ошибка в каком-либо вызове НЕ приведет к отмене ранее выполненных изменений и НЕ остановит процесс исполнения оставшихся методов.
Зависимость методов в пакете 
При указании параметров вызова метода можно ссылаться на результаты выполнения предыдущего метода с помощью инструкций JSONPath - . 
Метод, результаты которого требуется использовать, необходимо пометить с помощью поля id в BatchRequest. Это имя можно использовать в значениях параметров последующих методов с помощью конструкции вида:
${REQUEST_ID:JSONPathExpression}
Ссылаться можно только на результаты предыдущих методов, поскольку они выполняются строго в порядке их указания.
Поле, на которое указывает JSONPathExpression, должно присутствовать в составе данных, возвращаемых методом (см. параметр fields). Если выражение JSONPathExpression некорректно или ссылается на несуществующее поле, то система вернет для данного вызова код 422 с ошибкой invalid для соответствующего параметра.
Пример
curl https://api.livetex.ru/v2/utils/batch \
-H "Authorization: Bearer ACCESS_TOKEN" \
-d "methods[0][method]=carts.commit" \
-d "methods[0][parameters][id]=123456" \
-d "methods[0][id]=invoice" \
-d "methods[1][method]=products.list" \
-d "methods[1][parameters][fields]=id,offering(id,title)" \
--data-urlencoded 'methods[1][parameters][q]=ids=${invoice:$.order.products.*.id}'

{
    "results": [
        {
            "id": "invoice",
            "code": 200,
            "message": "",
            "results": {
                "id": 987654,
                "number": "987654",
                "order": {
                    "id":"45682",
                    "products":[{"id": 1001}, {"id": 1002}],
                    "activation_type": "now",
                    "period":{
                        ...
                    },
                    "created_at": "2014-09-24T15:24:45Z",
                    "updated_at": "2014-09-24T15:24:45Z"
                },
                "payer": {
                    ...
                },
                ...
            }
        },
        {
            "id": "",
            "code": 200,
            "message": "",
            "total": 2,
            "results": [
                {
                    "id": 1001,
                    "offering": {
                        "id": "2001",
                        "title": "Генератор лидов"
                    }
                    
                },
                {
                    "id": 1002,
                    "offering": {
                        "id": "2002",
                        "title": "HTTPS"
                    }
                }
            
            ]
        }
    ]
}


### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|methods|True|Array.<BatchRequest>|Массив методов и их параметров.<br/>Максимум 10 элементов. Одиннадцатый элемент и далее будут проигнорированы.<br/>|

### Резудьтат
Array.<[BatchResponse](/docs/types/BatchResponse.md)>
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|
