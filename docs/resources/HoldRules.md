
# HoldRules

## Описание ресурса

# Методы

## add

### Описание метода
Создает новый сценарий удержания.<br/>Пример вызова<br/>curl "https://api.livetex.ru/v2/holdrules" \<br/>-H "Authorization: Bearer ACCESS_TOKEN" \<br/>	-d "title=Одно сообщение и перевод" \<br/>	-d "hold_messages[0][text]=Оператор скоро вам ответит" \<br/>	-d "hold_messages[0][send_after]=15" \<br/>	-d "is_transfer=true" \<br/>	-d "transfer_after=15"<br/><br/><br/>
### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|*is_transfer*|True|[boolean](/types/boolean)|Признак перенаправления на другого оператора после последнего сообщения.<br/>Принимается во внимание, только если hold_messages содержит хотя бы один элемент.<br/>|
|*site_ids*|False|[idlist](/types/idlist)|Список ID сайтов, к которым следует подключить сценарий удержания.<br/>Если на указанном сайте уже используется какой-нибудь сценарий удержания, то он будет заменен на создаваемый.<br/>|
|*hold_messages*|True|Array.<[HoldMessage](/types/HoldMessage)>|Массив удерживающих сообщений.<br/>От 1 до 3 элементов.<br/>|
|*transfer_after*|False|[numeric](/types/numeric)|Интервал в секундах после последнего сообщения, по истечение которого выполнить перенаправление на другого оператора, если указано is_transfer.<br/>Должен быть от 5 до 3600 секунд.<br/>Обязательно, если is_transfer = true.<br/>Принимается во внимание, только если hold_messages содержит хотя бы один элемент.<br/>|
|*title*|True|[string](/types/string)|Название сценария удержания.<br/>|

### Результат
[HoldRule](/types/HoldRule)
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|
|*admin*|full||
|*manager*|managed|В параметре site_ids принимаются во внимание только свои сайты.|
|*chief*|managed|В параметре site_ids принимаются во внимание только свои сайты.|
|*chief_partner*|managed|В параметре site_ids принимаются во внимание только свои сайты.|
|*operator*|none||
|*admin_partner*|full||

## show

### Описание метода
Возвращает данные указанного сценария удержания.<br/><br/>
### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|*fields*|False|[string](/types/string)|Список через запятую возвращаемых полей.<br/>|
|*id*|True|[numeric](/types/numeric)|ID сценария удержания.<br/>|

### Результат
[HoldRule](/types/HoldRule)
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|
|*admin*|full||
|*manager*|full||
|*chief*|full||
|*chief_partner*|full||
|*operator*|none||
|*admin_partner*|full||

## list

### Описание метода
Возвращает список сценариев удержания.<br/><br/>
### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|*q*|False|[string](/types/string)|Критерий поиска.<br/>Доступные поля:<br/>ids – idlist, список ID сценариев удержания;<br/>site_ids – idlist, список ID сайтов, на которых используется сценарий;<br/>title.<br/>|
|*fields*|False|[string](/types/string)|Список через запятую возвращаемых полей.<br/>|
|*limit*|False|[numeric](/types/numeric)|По умолчанию – 50.<br/>|
|*sort*|False|[string](/types/string)|Сортировка результатов.<br/>Возможные значения:<br/>title:a – по умолчанию, title:d.<br/>|
|*offset*|False|[numeric](/types/numeric)|По умолчанию – 0.<br/>|

### Результат
Array.<[HoldRule](/types/HoldRule)>
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|
|*admin*|full||
|*manager*|full||
|*chief*|full||
|*chief_partner*|full||
|*operator*|none||
|*admin_partner*|full||

## update

### Описание метода
Изменяет указанный сценарий удержания.<br/><br/>
### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|*title*|False|[string](/types/string)|Название сценария удержания.<br/>|
|*transfer_after*|False|[numeric](/types/numeric)|Интервал в секундах после последнего сообщения, по истечение которого выполнить перенаправление на другого оператора, если указано is_transfer.<br/>Должен быть от 5 до 3600 секунд.<br/>Обязательно, если is_transfer = true.<br/>Принимается во внимание, только если hold_messages содержит хотя бы один элемент.<br/>|
|*is_transfer*|False|[boolean](/types/boolean)|Признак перенаправления на другого оператора после последнего сообщения.<br/>Принимается во внимание, только если hold_messages содержит хотя бы один элемент.<br/>|
|*site_ids*|False|[idlist](/types/idlist)|Список через запятую ID сайтов, на которых должен работать обновляемые сценарий удержания.<br/>Если на указанном сайте уже используется какой-нибудь сценарий удержания, то он будет заменен на обновляемый сценарий.<br/>Если обновляемый сценарий удержания используется на сайтах, не указанных в списке, то значение поля hold_rule этих сайтов устанавливается в null.<br/>Если в качестве значение указана пустая строка, то сценарий удержания будет отвязан от всех сайтов.<br/>|
|*hold_messages*|False|Array.<[HoldMessage](/types/HoldMessage)>|Массив удерживающих сообщений.<br/>От 1 до 3 элементов.<br/>|
|*id*|True|[numeric](/types/numeric)|ID сценария удержания.<br/>|

### Результат
None
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|
|*admin*|full||
|*manager*|managed|Только свои сценарии.|
|*chief*|managed|Только свои сценарии.|
|*chief_partner*|managed|Только свои сценарии.|
|*operator*|none||
|*admin_partner*|full||

## delete

### Описание метода
Удаляет указанный сценария удержания.<br/><br/>
### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|*id*|True|[numeric](/types/numeric)|ID сценария удержания.<br/>|

### Результат
None
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|
|*admin*|full||
|*manager*|managed|Только свои сценарии.|
|*chief*|managed|Только свои сценарии.|
|*chief_partner*|managed|Только свои сценарии.|
|*operator*|none||
|*admin_partner*|full||
