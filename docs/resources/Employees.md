
# Employees

## Описание ресурса
Employees

# Методы

## me

### Описание метода
Employees.me
Возвращает данные сотрудника, от учетной записи которого вызывается метод.
Параметры
Результат
Объект типа «Employee».
Уровень доступа для ролей


### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|fields|False|string|Список через запятую возвращаемых полей.<br/>|

### Резудьтат
None
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|
|admin|manager|chief|chief_partner|operator|admin_partner
## search

### Описание метода
Employees.search
Выполняет поиск сотрудника по подстроке в имени или фамилии сотрудника.
Возвращает первые 20 записей, отсортированные сначала по фамилии, а потом по имени.
Параметры
Результат
Массив объектов типа «Employee».
Уровень доступа для ролей


### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|text|True|string|Подстрока в имени или фамилии сотрудника.<br/>|

### Резудьтат
Array.<[Employee](types/Employee.md)>
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|
|admin|manager|chief|chief_partner|operator|admin_partner
## show

### Описание метода
Employees.show
Возвращает данные указанного сотрудника.
Параметры
Результат
Объект типа «Employee».
Уровень доступа для ролей


### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|fields|False|string|Список через запятую возвращаемых полей.<br/>|
|id|True|numeric|ID сотрудника.<br/>|

### Резудьтат
None
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|
|admin|manager|chief|chief_partner|operator|admin_partner
## register

### Описание метода
Employees.register
Создает новый аккаунт LiveTex.
При создании аккаунта автоматически создается учетная запись сотрудника. Ей назначается роль в признаком is_admin = true из числа ролей доступных в аккаунте.
Метод не требует аутентификации!
Параметры
Результат
Строковый идентификатор аккаунта LiveTex (LiveTex ID).
Уровень доступа для ролей
Уровень доступа для этого метода не определен, поскольку он выполняется в анонимном режиме.


### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|first_name|True|string|Полное имя.<br/>Значение будет записано в поле first_name соответствующей сотрудника.<br/>|
|password|True|string|Пароль.<br/>|
|site_name|True|string|Адрес сайта, на котором планируется использовать сервис LiveTex.<br/>|
|phone|False|phone|Телефон.<br/>|
|invite_id|False|numeric|Идентификатор приглашения.<br/>|
|partner_data|False|<RegistrationPartnerData>|Дополнительные поля, связанные с регистрацией, важные для партнерского отдела.<br/>|
|referral|False|numeric|Идентификатор аффилированного партнера.<br/>|
|marketing_data|False|<RegistrationMarketingData >|Дополнительные поля, связанные с регистрацией, важные для отдела маркетинга.<br/>|
|email|True|email|Адрес электронной почты.<br/>|

### Резудьтат
None
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|

## list

### Описание метода
Employees.list
Возвращает список сотрудников.
Параметры
Результат
Массив объектов типа «Employee».
Пример
{
    "total": 2,
    "results": [
        {
            "id":10000087,
            "first_name":"Иван",
            "last_name":"Петров"
        },
        {
            "id":10000012,
            "first_name":"Ольга",
            "last_name":"Соколова"
        }
    ]
}

Уровень доступа для ролей


### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|q|False|string|Критерий поиска.<br/>Доступные поля:<br/>ids – idlist, список ID сотрудников;<br/>department_ids – idlist, список ID отделов;<br/>first_name;<br/>last_name;<br/>email;<br/>role;<br/>is_active;<br/>state – enum, состояние сотрудника;<br/>is_managed – boolean, признак своего сотрудника.<br/>|
|fields|False|string|Список через запятую возвращаемых полей.<br/>|
|limit|False|numeric|По умолчанию – 50.<br/>|
|sort|False|string|Сортировка результатов.<br/>Возможные значения:<br/>last_name:a – по умолчанию, last_name:d;<br/>first_name:a, first_name:d;<br/>is_active:a, is_active:d;<br/>created_at:a, created_at:d;<br/>updated_at:a, updated_at:d.<br/>|
|offset|False|numeric|По умолчанию – 0.<br/>|

### Резудьтат
Array.<[Employee](types/Employee.md)>
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|
|admin|manager|chief|chief_partner|operator|admin_partner
## update

### Описание метода
Employees.update
Изменяет данные указанного сотрудника.
ВНИМАНИЕ!
При изменении роли сотрудника (role_code) с роли с is_full_by_default = true на роль с is_full_by_default = false поля managed_sites и managed_departments устанавливаются в пустое значение.
При изменении роли сотрудника (role_code) с роли с is_full_by_default = false на роль с is_full_by_default = true в поля managed_sites и managed_departments вносятся все сайты и отделы, включая удаленные.
Метод имеет дополнительные ограничения на изменение данных других сотрудников. См. комментарии в таблице «Уровень доступа для ролей» ниже по тексту.
Параметры
Результат
Метод ничего не возвращает.
Уровень доступа для ролей


### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|last_name|False|string|Фамилия сотрудника.<br/>|
|chat_limit|False|numeric|Количество одновременно обрабатываемых чатов.<br/>0 - отсутствие ограничения.<br/>|
|photo|False|file|Фотография сотрудника.<br/>Изображение в формате JPEG, GIF или PNG с размерами не менее 60x70px и не более 2560x2560px.<br/>Максимальный размер файла – 5 MB.<br/>|
|is_sip_forward|False|boolean|Включение/выключение переадресации на SIP.<br/>|
|is_cobrowse|False|boolean|Включение/выключение функции «Виртуальный ассистент».<br/>Принимается во внимание только, если эта функция включена на глобальном уровне. См. Settings.<br/>|
|phone_forward_number|False|string|Номер для переадресации на телефон.<br/>Обязательно при is_phone_forward=true.<br/>|
|id|True|numeric|ID сотрудника.<br/>|
|first_name|False|string|Имя сотрудника.<br/>|
|password|False|string|Новый пароль.<br/>Если не указано или пусто, то старый пароль не меняется.<br/>Минимальная длина – 6 символов.<br/>|
|role_code|False|string|Код роли.<br/>|
|managed_department_ids|False|idlist|Список, через запятую, ID отделов, входящих в область видимости сотрудника.<br/>Возможно указание удаленных отделов.<br/>|
|is_lead_assigned|False|boolean|Признак закрепления за оператором, созданных им лидов из чатов.<br/>|
|email|False|email|Адрес электронной почты.<br/>|
|sip_forward_number|False|string|Номер для переадресации на SIP.<br/>Обязательно при is_sip_forward=true.<br/>|
|is_call|False|boolean|Включение/выключение функциональности звонков.<br/>Принимается во внимание только, если эта функциональность включена на глобальном уровне. См. Settings.<br/>|
|is_active|False|boolean|Признак активности учетной записи сотрудника.<br/>|
|phone|False|phone|Телефон сотрудника.<br/>|
|managed_site_ids|False|idlist|Список, через запятую, ID сайтов, входящих в область видимости сотрудника.<br/>Возможно указание удаленных сайтов.<br/>|
|is_first_steps_passed|False|boolean|Признак завершения первичного обучения.<br/>|
|department_ids|False|idlist|Список, через запятую, ID отделов, в которые входит сотрудник.<br/>|
|is_lead_notify|False|boolean|Включение/выключение нотификации на электронную почту о поступлении новых лидов.<br/>|
|is_phone_forward|False|boolean|Включение/выключение переадресации на телефон.<br/>|

### Резудьтат
None
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|
|admin|manager|chief|chief_partner|operator|admin_partner
## setNewPassword

### Описание метода
Employees.setNewPassword
Устанавливает новый пароль.
Метод не требует аутентификации!
Параметры
Результат
Метод ничего не возвращает.
Уровень доступа для ролей
Уровень доступа для этого метода не определен, поскольку он выполняется в анонимном режиме.

### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|password|True|string|Новый пароль.<br/>|
|hash|True|string|Одноразовый ключ, отправленный по email, указанному при вызове метода Employees.resetPassword.<br/>|

### Резудьтат
None
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|

## registerAddPromo

### Описание метода
Employees.registerAddPromo
Добавляет промо-код к только что созданному аккаунту.
Этот метод можно вызвать хронологически между Employees.register и Employees.confirm. 
Метод не требует аутентификации!
Параметры
Результат
Метод ничего не возвращает.
Уровень доступа для ролей
Уровень доступа для этого метода не определен, поскольку он выполняется в анонимном режиме.


### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|id|True|numeric|Идентификатор аккаунта LiveTex (LiveTex ID), который вернул метод Employees.register.<br/>|
|promo_code|True|string|Промо код.<br/>|

### Резудьтат
None
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|

## add

### Описание метода
Employees.add
Создает учетную запись сотрудника.
Параметры
Результат
Объект типа «Employee».
Уровень доступа для ролей


### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|sip_forward_number|False|string|Номер для переадресации на SIP.<br/>Обязательно при is_sip_forward=true.<br/>|
|first_name|True|string|Имя сотрудника.<br/>|
|last_name|False|string|Фамилия сотрудника.<br/>|
|is_cobrowse|False|boolean|Включение/выключение функции «Виртуальный ассистент».<br/>Принимается во внимание только, если эта функция включена на глобальном уровне. См. Settings.<br/>По умолчанию – true.<br/>|
|chat_limit|False|numeric|Количество одновременно обрабатываемых чатов.<br/>По умолчанию – 0, что означает отсутствие ограничения.<br/>|
|photo|False|file|Фотография сотрудника.<br/>Изображение в формате JPEG, GIF или PNG с размерами не менее 60x70px и не более 2560x2560px.<br/>Максимальный размер файла – 5 MB.<br/>|
|department_ids|False|idlist|Список, через запятую, ID отделов, в которые входит сотрудник.<br/>|
|is_active|False|boolean|Признак активности учетной записи сотрудника.<br/>По умолчанию – true.<br/>|
|is_sip_forward|False|boolean|Включение/выключение переадресации на SIP.<br/>По умолчанию – false.<br/>|
|is_lead_notify|False|boolean|Включение/выключение нотификации на электронную почту о поступлении новых лидов.<br/>По умолчанию – false.<br/>|
|phone|False|phone|Телефон сотрудника.<br/>|
|managed_site_ids|False|idlist|Список, через запятую, ID сайтов, входящих в область видимости сотрудника.<br/>Возможно указание удаленных сайтов.<br/>|
|managed_department_ids|False|idlist|Список, через запятую, ID отделов, входящих в область видимости сотрудника.<br/>Возможно указание удаленных отделов.<br/>|
|is_lead_assigned|False|boolean|Признак закрепления за оператором, созданных им лидов из чатов.<br/>По умолчанию – false.<br/>|
|is_call|False|boolean|Включение/выключение функциональности звонков.<br/>Принимается во внимание только, если эта функциональность включена на глобальном уровне. См. Settings.<br/>По умолчанию – false.<br/>|
|phone_forward_number|False|string|Номер для переадресации на телефон.<br/>Обязательно при is_phone_forward=true.<br/>|
|password|True|string|Пароль.<br/>Минимальная длина – 6 символов.<br/>|
|role_code|False|string|Код роли. По умолчанию назначается роль, имеющая признак is_default = true.<br/>|
|email|True|email|Адрес электронной почты.<br/>|
|is_phone_forward|False|boolean|Включение/выключение переадресации на телефон.<br/>По умолчанию – false.<br/>|

### Резудьтат
None
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|
|admin|manager|chief|chief_partner|operator|admin_partner
## registerConfirm

### Описание метода
Employees.registerConfirm
Активирует новый аккаунт LiveTex и неявно выполняет аутентификацию пользователя.
Метод не требует аутентификации!
Параметры
Результат
Объект со следующими полями:
Уровень доступа для ролей
Уровень доступа для этого метода не определен, поскольку он выполняется в анонимном режиме.


### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|hash|True|string|Ключ активации, отправленный по email, указанному при вызове метода Employees.register.<br/>|
|id|True|numeric|Идентификатор аккаунта LiveTex (LiveTex ID), который вернул метод Employees.register.<br/>|

### Резудьтат
None
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|

## batchUpdate

### Описание метода
Employees.batchUpdate
Выполняет пакетное изменение данных указанных сотрудников.
Метод вызывает Employees.update для каждого ID сотрудника и передает указанные параметры.
Параметры
Результат
Массив объектов c ID, кодами и сообщениями об ошибке в порядке перечисления ID сотрудников в запросе.
Пример
curl https://api.livetex.ru/v2/employees/batchupdate \
-H "Authorization: Bearer ACCESS_TOKEN" \
-d "ids=123,456,789" \
-d "is_active=false"

{
    "results": [
        {
            "id": "123",
            "code": 200,
            "message": ""
        },
        {
            "id": "456",
            "code": 200,
            "message": ""
        },
        {
            "id": "789",
            "code": 403,
            "message": "Forbidden"
        }
    ]
}

Уровень доступа для ролей
ВНИМАНИЕ! При изменении конкретного сотрудника работает уровень доступа метода Employees.update в соответствующих условиях.

### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|sip_forward_number|False|string|Номер для переадресации на SIP.<br/>Обязательно при is_sip_forward=true.<br/>|
|is_lead_notify|False|boolean|Включение/выключение нотификации на электронную почту о поступлении новых лидов.<br/>|
|is_cobrowse|False|boolean|Включение/выключение функции «Виртуальный ассистент».<br/>Принимается во внимание только, если эта функция включена на глобальном уровне. См. Settings.<br/>|
|chat_limit|False|numeric|Количество одновременно обрабатываемых чатов.<br/>0 - отсутствие ограничения.<br/>|
|is_active|False|boolean|Признак активности учетной записи сотрудника.<br/>|
|ids|True|idlist|Список, через запятую, ID сотрудников.<br/>|
|is_sip_forward|False|boolean|Включение/выключение переадресации на SIP.<br/>|
|is_call|False|boolean|Включение/выключение функциональности звонков.<br/>Принимается во внимание только, если эта функциональность включена на глобальном уровне. См. Settings.<br/>|
|phone_forward_number|False|string|Номер для переадресации на телефон.<br/>Обязательно при is_phone_forward=true.<br/>|
|is_phone_forward|False|boolean|Включение/выключение переадресации на телефон.<br/>|

### Резудьтат
None
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|
|admin|manager|chief|chief_partner|operator|admin_partner
## delete

### Описание метода
Employees.delete
Удаляет указанного сотрудника.
ВНИМАНИЕ! При удалении сотрудника, удаляются также отделы, в которых он был единственным сотрудником.
Параметры
Результат
Метод ничего не возвращает.
Уровень доступа для ролей


### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|id|True|numeric|ID сотрудника.<br/>|

### Резудьтат
None
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|
|admin|manager|chief|chief_partner|operator|admin_partner
## resetPassword

### Описание метода
Employees.resetPassword
Инициирует процедуру установки нового пароля для указанного адреса электронной почты. Отправляется письмо с уникальной ссылкой на страницу ввода нового пароля.
Метод не требует аутентификации!
Параметры
Результат
Метод ничего не возвращает.
Уровень доступа для ролей
Уровень доступа для этого метода не определен, поскольку он выполняется в анонимном режиме.

### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|email|True|string|Адрес электронной почты сотрудника.<br/>|

### Резудьтат
None
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|
