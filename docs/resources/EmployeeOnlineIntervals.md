
# EmployeeOnlineIntervals

## Описание ресурса
EmployeeOnlineIntervals

# Методы

## listBySite

### Описание метода
EmployeeOnlineIntervals.listBySite
Возвращает интервалы времени онлайн сотрудников сгруппированные по сайтам.
Параметры
Особенности работы метода
Параметры фильтрации site_ids, department_ids и employee_ids определяют целевое множество сотрудников. Берутся сотрудники из числа employee_ids (если указано), связанные с указанными отделами (если указаны) и, напрямую или через отделы, с указанными сайтами (если указаны) по состоянию на момент выполнения запроса.
Удаленные сотрудники также принимаются во внимание.
Для целевого множества сотрудников ищутся периоды нахождения в состоянии «В сети» в пределах указанного периода дат (date) и временного окна в течение суток (time). Если для сотрудника из целевого множества и указанных временных условий не найдено периодов, когда он был в состоянии «В сети», то сотрудник будет исключен из рассмотрения.
В результатах будут сайты, с которыми, напрямую или через отделы, связаны сотрудники, попавшие в поле зрения согласно описанным выше условиям. Однако если указан критерий site_ids, то выборка будет дополнительно ограничена указанными отделами.
Метод вернет также данные удаленных сайтов.
Как и все методы типа list, этот метод возвращает в составе метаданных поле total с общим количеством найденных сайтов.
Результат
Массив объектов типа «Site» c добавление статистических данных.
Перечень доступных статистических данных

Пример
curl https://api.livetex.ru/v2/employeeonlineintervals.listbysite \
-H "Authorization: Bearer ACCESS_TOKEN"

{
    "total": 2,
    "results": [
        {
            "id": 1234567,
            "url": "first.mysyte.ru",
            "online_time": 54674,
            "intervals": [
                {"start":"2014-08-07T10:52:23+04:00", "end": "2014-08-07T13:10:47+04:00"},
                {"start":"2014-08-07T14:05:18+04:00", "end": "2014-08-07T18:59:31+04:00"},
                {"start":"2014-08-08T10:03:23+04:00", "end": "2014-08-08T12:23:27+04:00"},
                {"start":"2014-08-08T12:53:51+04:00", "end": "2014-08-08T13:15:21+04:00"},
                {"start":"2014-08-08T14:15:45+04:00", "end": "2014-08-08T19:32:48+04:00"}
            ]
        },
        {
            "id": 1234568,
            "url": "second.mysyte.ru",
            "online_time": 46270,
            "intervals": [
                {"start":"2014-08-07T10:52:23+04:00", "end": "2014-08-07T13:10:47+04:00"},
                {"start":"2014-08-07T14:05:18+04:00", "end": "2014-08-07T18:59:31+04:00"},
                {"start":"2014-08-08T12:53:51+04:00", "end": "2014-08-08T13:15:21+04:00"},
                {"start":"2014-08-08T14:15:45+04:00", "end": "2014-08-08T19:32:48+04:00"}
            ]
        }        
    ]
} 

Уровень доступа для ролей



### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|q|False|None|Критерий поиска.<br/>Доступные поля:<br/>site_ids – idlist, список ID сайтов.<br/>department_ids – idlist, список ID отделов.<br/>employee_ids – idlist, список ID сотрудников.<br/>date – date, период, за который запрашивается статистика.<br/>Максимум - 30 дней. По умолчанию устанавливается период равный предыдущим суткам.<br/>time – time, период времени в течение суток, принимаемый во внимание при поиске сотрудников в состоянии «В сети». Возможные значения от 00:00:00 до 23:59:59.<br/>|
|fields|False|None|Список возвращаемых полей через запятую.<br/>По умолчанию возвращаются стандартные поля сайта, а также:<br/>online_time;<br/>intervals.<br/>|
|limit|False|None|По умолчанию – 5.<br/>|
|sort|False|None|Сортировка результатов.<br/>Возможные значения:<br/>url:a – по умолчанию.<br/>|
|offset|False|None|По умолчанию – 0.<br/>|

### Резудьтат
Array.<[Site](/docs/types/Site.md)>
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|
|admin|manager|chief|chief_partner|operator|admin_partner
## listByEmployee

### Описание метода
EmployeeOnlineIntervals.listByEmployee
Возвращает интервалы времени онлайн сотрудников.
Параметры
Особенности работы метода
Параметры фильтрации site_ids, department_ids и employee_ids определяют целевое множество сотрудников. Берутся сотрудники из числа employee_ids (если указано), связанные с указанными отделами (если указаны) и, напрямую или через отделы, с указанными сайтами (если указаны) по состоянию на момент выполнения запроса.
Удаленные сотрудники также принимаются во внимание.
Для целевого множества сотрудников ищутся периоды нахождения в состоянии «В сети» в пределах указанного периода дат (date) и временного окна в течение суток (time).
Если для сотрудника из целевого множества и указанных временных условий не найдено периодов, когда он был в состоянии «В сети», то сотрудник будет исключен из результирующей выборки.
Как и все методы типа list, этот метод возвращает в составе метаданных поле total с общим количеством найденных сотрудников.
Результат
Массив объектов типа «Employee» c добавление статистических данных.
Перечень доступных статистических данных
Пример
curl https://api.livetex.ru/v2/employeeonlineintervals/listbyemployee \
-H "Authorization: Bearer ACCESS_TOKEN"

{
    "total": 2,
    "results": [
        {
            "id": 1234567,
            "title": "Иван Григорьев",
            "online_time": 54674,
            "intervals": [
                {"start":"2014-08-07T10:52:23+04:00", "end": "2014-08-07T13:10:47+04:00"},
                {"start":"2014-08-07T14:05:18+04:00", "end": "2014-08-07T18:59:31+04:00"},
                {"start":"2014-08-08T10:03:23+04:00", "end": "2014-08-08T12:23:27+04:00"},
                {"start":"2014-08-08T12:53:51+04:00", "end": "2014-08-08T13:15:21+04:00"},
                {"start":"2014-08-08T14:15:45+04:00", "end": "2014-08-08T19:32:48+04:00"}
            ]
        },
        {
            "id": 1234568,
            "url": "Сергей Антонов",
            "online_time": 46270,
            "intervals": [
                {"start":"2014-08-07T10:52:23+04:00", "end": "2014-08-07T13:10:47+04:00"},
                {"start":"2014-08-07T14:05:18+04:00", "end": "2014-08-07T18:59:31+04:00"},
                {"start":"2014-08-08T12:53:51+04:00", "end": "2014-08-08T13:15:21+04:00"},
                {"start":"2014-08-08T14:15:45+04:00", "end": "2014-08-08T19:32:48+04:00"}
            ]
        }        
    ]
} 

Уровень доступа для ролей


### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|q|False|None|Критерий поиска.<br/>Доступные поля:<br/>site_ids – idlist, список ID сайтов.<br/>department_ids – idlist, список ID отделов.<br/>employee_ids – idlist, список ID сотрудников.<br/>date – date, период, за который запрашивается статистика.<br/>Максимум - 30 дней. По умолчанию устанавливается период равный предыдущим суткам.<br/>time – time, период времени в течение суток, принимаемый во внимание при поиске сотрудников в состоянии «В сети». Возможные значения от 00:00:00 до 23:59:59.<br/>|
|fields|False|None|Список возвращаемых полей через запятую.<br/>По умолчанию возвращаются стандартные поля сайта, а также:<br/>online_time;<br/>intervals.<br/>|
|limit|False|None|По умолчанию – 5.<br/>|
|sort|False|None|Сортировка результатов.<br/>Возможные значения:<br/>last_name:a – по умолчанию;<br/>first_name:a.<br/>|
|offset|False|None|По умолчанию – 0.<br/>|

### Резудьтат
Array.<[Employee](/docs/types/Employee.md)>
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|
|admin|manager|chief|chief_partner|operator|admin_partner
## listByDepartment

### Описание метода
EmployeeOnlineIntervals.listByDepartment
Возвращает интервалы времени онлайн сотрудников сгруппированные по отделам.
Параметры
Особенности работы метода
Параметры фильтрации site_ids, department_ids и employee_ids определяют целевое множество сотрудников. Берутся сотрудники из числа employee_ids (если указано), связанные с указанными отделами (если указаны) и, напрямую или через отделы, с указанными сайтами (если указаны) по состоянию на момент выполнения запроса.
Удаленные сотрудники также принимаются во внимание.
Для целевого множества сотрудников ищутся периоды нахождения в состоянии «В сети» в пределах указанного периода дат (date) и временного окна в течение суток (time). Если для сотрудника из целевого множества и указанных временных условий не найдено периодов, когда он был в состоянии «В сети», то сотрудник будет исключен из рассмотрения.
В результатах будут отделы, с которыми связаны сотрудники, попавшие в поле зрения согласно описанным выше условиям. Однако если указан критерий department_ids, то выборка будет дополнительно ограничена указанными отделами.
Метод вернет также данные удаленных отделов.
Как и все методы типа list, этот метод возвращает в составе метаданных поле total с общим количеством найденных отделов.
Результат
Массив объектов типа «Department» c добавление статистических данных.
Перечень доступных статистических данных

Пример
curl https://api.livetex.ru/v2/employeeonlineintervals.listbydepartment \
-H "Authorization: Bearer ACCESS_TOKEN"

{
    "total": 2,
    "results": [
        {
            "id": 1234567,
            "title": "Отдел продаж",
            "online_time": 54674,
            "intervals": [
                {"start":"2014-08-07T10:52:23+04:00", "end": "2014-08-07T13:10:47+04:00"},
                {"start":"2014-08-07T14:05:18+04:00", "end": "2014-08-07T18:59:31+04:00"},
                {"start":"2014-08-08T10:03:23+04:00", "end": "2014-08-08T12:23:27+04:00"},
                {"start":"2014-08-08T12:53:51+04:00", "end": "2014-08-08T13:15:21+04:00"},
                {"start":"2014-08-08T14:15:45+04:00", "end": "2014-08-08T19:32:48+04:00"}
            ]
        },
        {
            "id": 1234568,
            "url": "Отдел доставки",
            "online_time": 46270,
            "intervals": [
                {"start":"2014-08-07T10:52:23+04:00", "end": "2014-08-07T13:10:47+04:00"},
                {"start":"2014-08-07T14:05:18+04:00", "end": "2014-08-07T18:59:31+04:00"},
                {"start":"2014-08-08T12:53:51+04:00", "end": "2014-08-08T13:15:21+04:00"},
                {"start":"2014-08-08T14:15:45+04:00", "end": "2014-08-08T19:32:48+04:00"}
            ]
        }        
    ]
} 

Уровень доступа для ролей


### Поля

| Имя поля | Необходимость | Тип данных | Комментарий |
|---|---|---|---|
|q|False|None|Критерий поиска.<br/>Доступные поля:<br/>site_ids – idlist, список ID сайтов.<br/>department_ids – idlist, список ID отделов.<br/>employee_ids – idlist, список ID сотрудников.<br/>date – date, период, за который запрашивается статистика.<br/>Максимум - 30 дней. По умолчанию устанавливается период равный предыдущим суткам.<br/>time – time, период времени в течение суток, принимаемый во внимание при поиске сотрудников в состоянии "В сети". Возможные значения от 00:00:00 до 23:59:59.<br/>|
|fields|False|None|Список возвращаемых полей через запятую.<br/>По умолчанию возвращаются стандартные поля сайта, а также:<br/>online_time;<br/>intervals.<br/>|
|limit|False|None|По умолчанию – 5.<br/>|
|sort|False|None|Сортировка результатов.<br/>Возможные значения:<br/>title:a – по умолчанию.<br/>|
|offset|False|None|По умолчанию – 0.<br/>|

### Резудьтат
Array.<[Department](/docs/types/Department.md)>
### Доступы к методу

| Имя роли | доступ | Комментарий |
|---|---|---|
|admin|manager|chief|chief_partner|operator|admin_partner